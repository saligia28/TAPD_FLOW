#!/usr/bin/env python3
from __future__ import annotations
import argparse
import os
import sys
import json

REPO = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
SRC = os.path.join(REPO, "src")
if SRC not in sys.path:
    sys.path.insert(0, SRC)

from analyzer.rule_based import analyze  # type: ignore


def main() -> None:
    parser = argparse.ArgumentParser(prog="analyze", description="Run rule-based analyzer for a given text")
    parser.add_argument("-t", "--text", default="作为用户，我希望……（示例）", help="输入文本（留空则示范文本）")
    args = parser.parse_args()
    res = analyze(args.text or "")
    print(json.dumps(res, ensure_ascii=False, indent=2))


if __name__ == "__main__":
    main()

